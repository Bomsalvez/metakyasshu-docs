# ðŸ·ï¸ RF31 - Criar Categoria para Meta AlcanÃ§ada 

![Logo.png](Logo.png){ width=150 }

## ðŸ“ DescriÃ§Ã£o

Quando o usuÃ¡rio alcanÃ§ar uma meta, o sistema criarÃ¡ uma categoria para a meta alcanÃ§ada.

## ðŸ‘¥ Atores

- ðŸ¤– Sistema

## âš ï¸ PrÃ©-condiÃ§Ãµes

- A meta deve existir no sistema.
- A meta deve ter sido alcanÃ§ada.

## ðŸ”Œ Endpoints

- NÃ£o se aplica. (Processo interno do sistema)

## ðŸ“‹ Dados do Processamento

| Campo    | Tipo     | ObrigatÃ³rio | DescriÃ§Ã£o              | RestriÃ§Ãµes                    |
|----------|----------|-------------|------------------------|-------------------------------|
| `pkGoal` | `long`   | âœ… Sim      | Chave primÃ¡ria da meta |                               |
| `name`   | `string` | âœ… Sim      | Nome da categoria      | MÃ­nimo de 3 caracteres        |
| `group`  | `enum`   | âœ… Sim      | Grupo da categoria     | META                          |
| `icon`   | `file`   | âŒ NÃ£o      | Ãcone da categoria     | JPEG, PNG, SVG, MÃ¡ximo de 1MB |
| `token`  | `string` | âœ… Sim      | Token jwt do usuÃ¡rio   |                               |

## ðŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    participant S as Sistema
    participant BD as Banco de Dados
    
    S->>BD: Verifica status da meta
    BD->>S: Retorna meta e status
    alt Meta alcanÃ§ada
        S->>S: Prepara dados da categoria
        S->>BD: Cria categoria com nome da meta
        BD->>S: Confirma criaÃ§Ã£o
        S->>BD: Atualiza status da meta
        BD->>S: Confirma atualizaÃ§Ã£o
    end
```

1. O sistema verifica se a meta foi alcanÃ§ada.
2. O sistema cria uma categoria para a meta alcanÃ§ada.
3. O sistema vincula a categoria ao usuÃ¡rio dono da meta.
4. O sistema atualiza o status da meta para "COMPLETED".

## ðŸ”€ Fluxos Alternativos

- NÃ£o se aplica.

## ðŸš« Fluxos de ExceÃ§Ã£o

- NÃ£o se aplica.

## ðŸ§ª Exemplos de Uso

Como esse Ã© um processo interno do sistema, nÃ£o hÃ¡ exemplos de requisiÃ§Ãµes HTTP, mas podemos ilustrar o funcionamento interno:

### Evento Interno
```
GOAL_REACHED_EVENT:
{
  "goalId": 42,
  "userId": 123,
  "goalName": "Viagem para praia",
  "currentValue": 6000.00,
  "targetValue": 6000.00,
  "percentage": 100
}
```

### AÃ§Ã£o do Sistema
```
CREATE_CATEGORY:
{
  "name": "Viagem para praia",
  "group": "META",
  "userId": 123,
  "icon": "default_goal_icon.png"
}
```

### Resposta do Sistema (Log interno)
```
INFO: Meta ID 42 alcanÃ§ada (100%). Categoria "Viagem para praia" criada com ID 78 para o usuÃ¡rio 123.
```


> ---------------------------------------------------------------------------
> #### ðŸ’° Sistema de GestÃ£o Financeira ðŸ’°
> ***Controlando suas finanÃ§as de forma simples e eficiente***
> ---------------------------------------------------------------------------