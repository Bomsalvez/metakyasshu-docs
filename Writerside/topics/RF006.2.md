# RF006.2 ðŸ’³ GestÃ£o de contas bancÃ¡rias

## ðŸ“ DescriÃ§Ã£o

Esta funcionalidade permite que o usuÃ¡rio gerencie (visualize, edite e exclua) suas contas bancÃ¡rias cadastradas no
sistema para um controle financeiro completo.

## ðŸ‘¥ Atores

- ðŸ‘¤ UsuÃ¡rio Autenticado

## âš ï¸ PrÃ©-condiÃ§Ãµes

- O usuÃ¡rio deve estar logado no sistema.
- O usuÃ¡rio deve ter pelo menos uma conta bancÃ¡ria cadastrada.

## ðŸ”Œ Endpoints

- `GET /api/account`
- `GET /api/account/{accountId}`
- `PUT /api/account/{accountId}`
- `DELETE /api/account/{accountId}`

## ðŸ“‹ Dados da Conta BancÃ¡ria

| Campo            | Tipo     | ObrigatÃ³rio | DescriÃ§Ã£o                          | RestriÃ§Ãµes             |
|------------------|----------|-------------|------------------------------------|------------------------|
| `accountId`      | `string` | âœ… Sim       | ID Ãºnico da conta bancÃ¡ria         | UUID vÃ¡lido            |
| `bank_name`      | `string` | â¬œ NÃ£o       | Nome do banco (para ediÃ§Ã£o)        | MÃ­nimo de 2 caracteres |
| `account_type`   | `string` | â¬œ NÃ£o       | Tipo de conta (para ediÃ§Ã£o)        | `checking`, `savings`  |
| `agency`         | `string` | â¬œ NÃ£o       | NÃºmero da agÃªncia (para ediÃ§Ã£o)    | Formato numÃ©rico       |
| `account_number` | `string` | â¬œ NÃ£o       | NÃºmero da conta (para ediÃ§Ã£o)      | Formato numÃ©rico       |
| `balance`        | `number` | â¬œ NÃ£o       | Saldo atual da conta (para ediÃ§Ã£o) | Valor nÃ£o negativo     |

## ðŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    actor U as UsuÃ¡rio
    participant S as Sistema
    participant BD as Banco de Dados
    U->>S: Acessa a seÃ§Ã£o de gerenciamento de contas
    S->>BD: Solicita lista de contas do usuÃ¡rio
    BD->>S: Retorna lista de contas
    S->>U: Exibe a lista de contas bancÃ¡rias
    U->>S: Seleciona uma conta para visualizar/editar/excluir
    alt Visualizar Conta
        S->>BD: Solicita detalhes da conta
        BD->>S: Retorna detalhes da conta
        S->>U: Exibe detalhes da conta selecionada
    else Editar Conta
        S->>U: Exibe formulÃ¡rio de ediÃ§Ã£o com dados atuais
        U->>S: Altera os dados e envia o formulÃ¡rio
        S->>S: Valida os dados atualizados
        S->>BD: Atualiza a conta no banco de dados
        BD->>S: Confirma a atualizaÃ§Ã£o
        S->>U: Exibe mensagem de sucesso e conta atualizada
    else Excluir Conta
        S->>U: Solicita confirmaÃ§Ã£o de exclusÃ£o
        U->>S: Confirma a exclusÃ£o
        S->>BD: Remove a conta do banco de dados
        BD->>S: Confirma a remoÃ§Ã£o
        S->>U: Exibe mensagem de sucesso e remove conta da lista
    end
```

1. O usuÃ¡rio autenticado acessa a seÃ§Ã£o de gerenciamento de contas bancÃ¡rias.
2. O sistema exibe uma lista de todas as contas bancÃ¡rias associadas ao usuÃ¡rio.
3. O usuÃ¡rio seleciona uma opÃ§Ã£o: visualizar detalhes, editar ou excluir uma conta existente.
4. **Para VisualizaÃ§Ã£o:** O sistema exibe os detalhes completos da conta selecionada.
5. **Para EdiÃ§Ã£o:**
   a. O sistema apresenta um formulÃ¡rio prÃ©-preenchido com os dados atuais da conta.
   b. O usuÃ¡rio modifica os campos desejados (ex: nome do banco, tipo, saldo) e submete as alteraÃ§Ãµes.
   c. O sistema valida os novos dados e atualiza a conta no banco de dados.
   d. O sistema exibe uma mensagem de sucesso e a lista de contas atualizada.
6. **Para ExclusÃ£o:**
   a. O sistema solicita uma confirmaÃ§Ã£o do usuÃ¡rio para a exclusÃ£o da conta.
   b. ApÃ³s a confirmaÃ§Ã£o, o sistema remove a conta do banco de dados.
   c. O sistema exibe uma mensagem de sucesso e a lista de contas atualizada (sem a conta excluÃ­da).

## ðŸ”€ Fluxos Alternativos

### âš ï¸ FA01 - Tentativa de exclusÃ£o da Ãºltima conta bancÃ¡ria

1. No passo 6b do fluxo principal, se o usuÃ¡rio tentar excluir a Ãºltima conta bancÃ¡ria restante, o sistema exibe uma
   mensagem de erro informando que nÃ£o Ã© possÃ­vel excluir a Ãºnica conta existente.

## ðŸš« Fluxos de ExceÃ§Ã£o

### âš ï¸ FE01 - Conta nÃ£o encontrada

1. Em qualquer operaÃ§Ã£o (visualizar, editar, excluir), se o `accountId` fornecido nÃ£o corresponder a uma conta existente
   para o usuÃ¡rio, o sistema exibe uma mensagem de erro indicando que a conta nÃ£o foi encontrada.

### âš ï¸ FE02 - Dados de ediÃ§Ã£o invÃ¡lidos

1. No passo 5c do fluxo principal, se os dados de ediÃ§Ã£o forem invÃ¡lidos (ex: nome do banco muito curto, tipo de conta
   invÃ¡lido), o sistema exibe uma mensagem de erro especÃ­fica para o campo invÃ¡lido.
2. O sistema mantÃ©m o usuÃ¡rio no formulÃ¡rio de ediÃ§Ã£o para que ele possa corrigir os dados.

### âš ï¸ FE03 - Erro ao atualizar/excluir conta

1. No passo 5c ou 6b do fluxo principal, se ocorrer um erro interno no sistema ao tentar atualizar ou excluir a conta
   bancÃ¡ria, o sistema exibe uma mensagem de erro genÃ©rica e sugere que o usuÃ¡rio tente novamente mais tarde.

## ðŸ§ª Exemplos de Uso

### RequisiÃ§Ã£o HTTP - Listar Contas BancÃ¡rias

```http
GET /api/account HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

### RequisiÃ§Ã£o HTTP - Obter Detalhes de uma Conta BancÃ¡ria

```http
GET /api/account/a1b2c3d4e5f6-1234-5678-90ab-cdef12345678 HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

### RequisiÃ§Ã£o HTTP - Atualizar uma Conta BancÃ¡ria

```http
PUT /api/account/a1b2c3d4e5f6-1234-5678-90ab-cdef12345678 HTTP/1.1
Host: api.metakyasshu.com
Content-Type: application/json
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]

{
  "bank_name": "Novo Banco S.A.",
  "balance": 2500.75
}
```

### RequisiÃ§Ã£o HTTP - Excluir uma Conta BancÃ¡ria

```http
DELETE /api/account/a1b2c3d4e5f6-1234-5678-90ab-cdef12345678 HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

---

> ---------------------------------------------------------------------------
> #### ðŸ’° METAKYASSHU ðŸ’°
> ***Transformando finanÃ§as em conquistas compartilhadas***
> --------------------------------------------------------------------------- 