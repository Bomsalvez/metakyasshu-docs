# RF012.2 ðŸŽ¯ Acompanhamento de metas financeiras

## ðŸ“ DescriÃ§Ã£o

Esta funcionalidade permite o acompanhamento do progresso e a conclusÃ£o de metas financeiras, oferecendo ao usuÃ¡rio uma
visÃ£o clara de seu avanÃ§o em relaÃ§Ã£o aos objetivos estabelecidos.

## ðŸ‘¥ Atores

- ðŸ‘¤ UsuÃ¡rio Autenticado

## âš ï¸ PrÃ©-condiÃ§Ãµes

- O usuÃ¡rio deve estar logado no sistema.
- O usuÃ¡rio deve ter pelo menos uma meta financeira criada.

## ðŸ”Œ Endpoints

- `GET /api/goals`
- `GET /api/goals/{goalId}`
- `PUT /api/goals/{goalId}/progress` (para atualizar progresso)
- `PUT /api/goals/{goalId}/complete` (para marcar como concluÃ­da)
- `DELETE /api/goals/{goalId}`

## ðŸ“‹ Dados de Acompanhamento de Meta Financeira

| Campo          | Tipo     | ObrigatÃ³rio            | DescriÃ§Ã£o                             | RestriÃ§Ãµes                              |
|----------------|----------|------------------------|---------------------------------------|-----------------------------------------|
| `goalId`       | `string` | âœ… Sim                  | ID Ãºnico da meta financeira           | UUID vÃ¡lido, meta existente             |
| `amount_added` | `number` | âœ… Sim (para progresso) | Valor adicionado Ã  meta               | Valor positivo                          |
| `status`       | `string` | â¬œ NÃ£o                  | Status da meta (automÃ¡tico ou manual) | `in_progress`, `completed`, `cancelled` |

## ðŸ”„ Fluxo Principal - Acompanhamento e AtualizaÃ§Ã£o de Progresso

```mermaid
sequenceDiagram
    actor U as UsuÃ¡rio
    participant S as Sistema
    participant BD as Banco de Dados
    U->>S: Acessa a seÃ§Ã£o de Metas Financeiras
    S->>BD: Solicita lista de metas do usuÃ¡rio
    BD->>S: Retorna lista de metas com progresso
    S->>U: Exibe a lista de metas com % de progresso
    U->>S: Seleciona uma meta para atualizar progresso
    S->>U: Informa o valor adicionado Ã  meta
    S->>S: Valida o valor e atualiza o `current_amount` da meta
    S->>BD: Salva o progresso atualizado
    BD->>S: Confirma o salvamento
    S->>U: Exibe mensagem de sucesso e progresso atualizado
```

1. O usuÃ¡rio autenticado acessa a seÃ§Ã£o de gerenciamento de metas financeiras.
2. O sistema exibe uma lista de todas as metas criadas pelo usuÃ¡rio, mostrando o nome da meta, o valor total a ser
   alcanÃ§ado, o valor atual acumulado e a porcentagem de progresso.
3. O usuÃ¡rio pode:
   a. **Visualizar Detalhes:** Selecionar uma meta para ver informaÃ§Ãµes mais detalhadas e um histÃ³rico de contribuiÃ§Ãµes.
   b. **Atualizar Progresso:** Informar um valor que foi adicionado Ã  meta. O sistema valida o valor (deve ser positivo
   e nÃ£o exceder o `target_amount`) e o adiciona ao `current_amount` da meta no banco de dados. O sistema recalcula a
   porcentagem de progresso.
   c. **Marcar como ConcluÃ­da:** Se o `current_amount` atingir ou exceder o `target_amount`, o sistema pode
   automaticamente marcar a meta como `completed`. O usuÃ¡rio tambÃ©m pode marcÃ¡-la manualmente.
   d. **Cancelar Meta:** O usuÃ¡rio pode optar por cancelar uma meta, que Ã© entÃ£o marcada como `cancelled` e nÃ£o aparece
   mais como ativa.
4. O sistema exibe uma mensagem de sucesso apÃ³s cada operaÃ§Ã£o e atualiza a lista de metas.

## ðŸ”€ Fluxos Alternativos

### âš ï¸ FA01 - NotificaÃ§Ãµes de Progresso

1. O sistema envia notificaÃ§Ãµes ao usuÃ¡rio quando hÃ¡ um progresso significativo na meta (ex: atingir 25%, 50%, 75% ou
   100%).
2. O sistema tambÃ©m pode enviar lembretes periÃ³dicos sobre metas prÃ³ximas da `due_date` ou com progresso lento.

## ðŸš« Fluxos de ExceÃ§Ã£o

### âš ï¸ FE01 - Meta nÃ£o encontrada

1. Ao tentar atualizar o progresso ou o status de uma meta com um `goalId` invÃ¡lido ou inexistente, o sistema exibe uma
   mensagem de erro indicando que a meta nÃ£o foi encontrada.

### âš ï¸ FE02 - Valor adicionado invÃ¡lido

1. Ao tentar adicionar um valor negativo ou um valor que faria o `current_amount` exceder o `target_amount` (a menos que
   a meta seja marcada como concluÃ­da), o sistema exibe uma mensagem de erro.
2. O sistema retorna Ã  tela de atualizaÃ§Ã£o de progresso para que o usuÃ¡rio corrija o valor.

### âš ï¸ FE03 - Erro ao atualizar meta

1. Se ocorrer um erro interno no sistema durante as operaÃ§Ãµes de atualizaÃ§Ã£o ou conclusÃ£o da meta, o sistema exibe uma
   mensagem de erro genÃ©rica e sugere que o usuÃ¡rio tente novamente mais tarde.

## ðŸ§ª Exemplos de Uso

### RequisiÃ§Ã£o HTTP - Listar Metas Financeiras

```http
GET /api/goals HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

### RequisiÃ§Ã£o HTTP - Atualizar Progresso da Meta

```http
PUT /api/goals/a1b2c3d4e5f6-1234-5678-90ab-cdef12345678/progress HTTP/1.1
Host: api.metakyasshu.com
Content-Type: application/json
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]

{
  "amount_added": 500.00
}
```

### RequisiÃ§Ã£o HTTP - Marcar Meta como ConcluÃ­da

```http
PUT /api/goals/a1b2c3d4e5f6-1234-5678-90ab-cdef12345678/complete HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

### RequisiÃ§Ã£o HTTP - Excluir Meta

```http
DELETE /api/goals/a1b2c3d4e5f6-1234-5678-90ab-cdef12345678 HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

---

> ---------------------------------------------------------------------------
> #### ðŸ’° METAKYASSHU ðŸ’°
> ***Transformando finanÃ§as em conquistas compartilhadas***
> --------------------------------------------------------------------------- 