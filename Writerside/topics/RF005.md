# RF005 ğŸ”’ ConfiguraÃ§Ãµes de privacidade granulares para dados pessoais

## ğŸ“ DescriÃ§Ã£o

Esta funcionalidade permite que o usuÃ¡rio configure permissÃµes de privacidade granulares para seus dados pessoais,
controlando quais informaÃ§Ãµes sÃ£o visÃ­veis e para quem (ex: membros do grupo, outros usuÃ¡rios).

## ğŸ‘¥ Atores

- ğŸ‘¤ UsuÃ¡rio Autenticado

## âš ï¸ PrÃ©-condiÃ§Ãµes

- O usuÃ¡rio deve estar logado no sistema.
- O usuÃ¡rio deve possuir dados pessoais no sistema para configurar a privacidade.

## ğŸ”Œ Endpoints

- `GET /api/user/privacy-settings`
- `PUT /api/user/privacy-settings`

## ğŸ“‹ Dados de ConfiguraÃ§Ã£o de Privacidade

| Campo         | Tipo            | ObrigatÃ³rio | DescriÃ§Ã£o                                                       | Valores PossÃ­veis                         |
|---------------|-----------------|-------------|-----------------------------------------------------------------|-------------------------------------------|
| `data_type`   | `string`        | âœ… Sim       | Tipo de dado pessoal (ex: email, nome, transaÃ§Ãµes)              | `email`, `phone`, `transactions`, `goals` |
| `visibility`  | `string`        | âœ… Sim       | NÃ­vel de visibilidade do dado                                   | `private`, `group`, `public`              |
| `shared_with` | `array<string>` | â¬œ NÃ£o       | Lista de IDs de usuÃ¡rios/grupos com quem o dado Ã© compartilhado | IDs de usuÃ¡rios ou grupos                 |

## ğŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    actor U as UsuÃ¡rio
    participant S as Sistema
    participant BD as Banco de Dados
    U->>S: Acessa a seÃ§Ã£o de configuraÃ§Ãµes de privacidade
    S->>BD: Solicita configuraÃ§Ãµes de privacidade atuais do usuÃ¡rio
    BD->>S: Retorna configuraÃ§Ãµes de privacidade
    S->>U: Exibe as configuraÃ§Ãµes de privacidade atuais
    U->>S: Altera as permissÃµes de privacidade para dados especÃ­ficos
    S->>S: Valida as novas configuraÃ§Ãµes
    S->>BD: Atualiza as configuraÃ§Ãµes de privacidade no banco de dados
    BD->>S: Confirma a atualizaÃ§Ã£o
    S->>U: Exibe mensagem de sucesso e confirmaÃ§Ã£o das alteraÃ§Ãµes
```

1. O usuÃ¡rio autenticado acessa a seÃ§Ã£o de configuraÃ§Ãµes de privacidade em seu perfil.
2. O sistema exibe as configuraÃ§Ãµes de privacidade atuais para diferentes tipos de dados pessoais (ex: email, telefone,
   transaÃ§Ãµes, metas).
3. O usuÃ¡rio seleciona um tipo de dado e modifica seu nÃ­vel de visibilidade (ex: `privado`, `apenas para o grupo`,
   `pÃºblico`).
4. Se a visibilidade for definida como `group` ou `public`, o usuÃ¡rio pode especificar com quais grupos ou usuÃ¡rios os
   dados serÃ£o compartilhados.
5. O usuÃ¡rio salva as alteraÃ§Ãµes.
6. O sistema valida as novas configuraÃ§Ãµes de privacidade para garantir consistÃªncia.
7. O sistema atualiza as permissÃµes de privacidade no banco de dados.
8. O sistema exibe uma mensagem de confirmaÃ§Ã£o de que as configuraÃ§Ãµes foram salvas com sucesso.

## ğŸ”€ Fluxos Alternativos

### âš ï¸ FA01 - ConfiguraÃ§Ã£o de privacidade de dados sensÃ­veis

1. No passo 3 do fluxo principal, se o usuÃ¡rio tentar tornar um dado altamente sensÃ­vel (ex: CPF) visÃ­vel publicamente,
   o sistema pode exibir um aviso de seguranÃ§a e solicitar uma confirmaÃ§Ã£o adicional.

## ğŸš« Fluxos de ExceÃ§Ã£o

### âš ï¸ FE01 - Dados de configuraÃ§Ã£o invÃ¡lidos

1. No passo 6 do fluxo principal, se as configuraÃ§Ãµes de privacidade enviadas forem invÃ¡lidas (ex: tipo de dado
   inexistente, nÃ­vel de visibilidade invÃ¡lido), o sistema exibe uma mensagem de erro indicando o problema.
2. O sistema mantÃ©m o usuÃ¡rio na tela de configuraÃ§Ãµes para que ele possa corrigir as informaÃ§Ãµes.

### âš ï¸ FE02 - Erro ao atualizar configuraÃ§Ãµes

1. No passo 7 do fluxo principal, se ocorrer um erro durante a atualizaÃ§Ã£o das configuraÃ§Ãµes no banco de dados, o
   sistema exibe uma mensagem de erro genÃ©rica e sugere que o usuÃ¡rio tente novamente mais tarde.

## ğŸ§ª Exemplos de Uso

### RequisiÃ§Ã£o HTTP - Obter ConfiguraÃ§Ãµes de Privacidade

```http
GET /api/user/privacy-settings HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

### RequisiÃ§Ã£o HTTP - Atualizar ConfiguraÃ§Ãµes de Privacidade

```http
PUT /api/user/privacy-settings HTTP/1.1
Host: api.metakyasshu.com
Content-Type: application/json
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]

{
  "data_type": "transactions",
  "visibility": "group",
  "shared_with": ["group_id_1", "user_id_2"]
}
```

---

> ---------------------------------------------------------------------------
> #### ğŸ’° METAKYASSHU ğŸ’°
> ***Transformando finanÃ§as em conquistas compartilhadas***
> --------------------------------------------------------------------------- 