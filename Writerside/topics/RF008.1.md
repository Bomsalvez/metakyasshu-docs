# RF008.1 ðŸ·ï¸ CategorizaÃ§Ã£o automÃ¡tica de transaÃ§Ãµes

## ðŸ“ DescriÃ§Ã£o

Esta funcionalidade permite a categorizaÃ§Ã£o automÃ¡tica de transaÃ§Ãµes utilizando algoritmos de inteligÃªncia artificial,
baseando-se em padrÃµes de gastos, histÃ³rico do usuÃ¡rio e descriÃ§Ã£o da transaÃ§Ã£o.

## ðŸ‘¥ Atores

- ðŸ‘¤ Sistema (AI)
- ðŸ‘¤ UsuÃ¡rio Autenticado (para revisÃ£o)

## âš ï¸ PrÃ©-condiÃ§Ãµes

- O usuÃ¡rio deve ter transaÃ§Ãµes registradas no sistema.
- O sistema de inteligÃªncia artificial para categorizaÃ§Ã£o deve estar ativo e configurado.

## ðŸ”Œ Endpoints

- `POST /api/transactions/{transactionId}/categorize/auto`
- `GET /api/categories/suggest` (para sugestÃµes)

## ðŸ“‹ Dados para CategorizaÃ§Ã£o AutomÃ¡tica

| Campo                   | Tipo     | ObrigatÃ³rio | DescriÃ§Ã£o                                    | RestriÃ§Ãµes                       |
|-------------------------|----------|-------------|----------------------------------------------|----------------------------------|
| `transaction_id`        | `string` | âœ… Sim       | ID da transaÃ§Ã£o a ser categorizada           | UUID vÃ¡lido, transaÃ§Ã£o existente |
| `suggested_category_id` | `string` | â¬œ NÃ£o       | ID da categoria sugerida pela AI (retorno)   | UUID vÃ¡lido, categoria existente |
| `confidence_score`      | `number` | â¬œ NÃ£o       | PontuaÃ§Ã£o de confianÃ§a da sugestÃ£o (retorno) | 0.0 a 1.0                        |

## ðŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    participant S as Sistema
    participant AI as MÃ³dulo de IA
    participant BD as Banco de Dados
    S->>BD: Nova transaÃ§Ã£o registrada
    BD->>S: Notifica nova transaÃ§Ã£o
    S->>AI: Envia dados da transaÃ§Ã£o para categorizaÃ§Ã£o
    AI->>AI: Analisa dados (descriÃ§Ã£o, valor, histÃ³rico)
    AI-->>S: Retorna categoria sugerida e confianÃ§a
    S->>BD: Atualiza transaÃ§Ã£o com categoria sugerida (se confianÃ§a alta)
    BD->>S: Confirma atualizaÃ§Ã£o
    S->>S: Marca transaÃ§Ã£o para revisÃ£o manual (se confianÃ§a baixa)
```

1. Uma nova transaÃ§Ã£o Ã© registrada no sistema (manualmente pelo usuÃ¡rio ou importada).
2. O sistema envia os detalhes da transaÃ§Ã£o (descriÃ§Ã£o, valor, data, etc.) para o mÃ³dulo de inteligÃªncia artificial.
3. O mÃ³dulo de IA analisa os dados da transaÃ§Ã£o, comparando-os com padrÃµes de gastos do usuÃ¡rio e um banco de dados de
   categorias prÃ©-definidas.
4. O mÃ³dulo de IA sugere uma categoria para a transaÃ§Ã£o e atribui uma pontuaÃ§Ã£o de confianÃ§a a essa sugestÃ£o.
5. Se a pontuaÃ§Ã£o de confianÃ§a for alta (acima de um limite configurÃ¡vel), o sistema automaticamente atribui a categoria
   sugerida Ã  transaÃ§Ã£o e a marca como categorizada.
6. Se a pontuaÃ§Ã£o de confianÃ§a for baixa, o sistema mantÃ©m a transaÃ§Ã£o sem categoria e a marca para revisÃ£o manual pelo
   usuÃ¡rio, podendo tambÃ©m sugerir a categoria para que o usuÃ¡rio confirme.

## ðŸ”€ Fluxos Alternativos

### âš ï¸ FA01 - RejeiÃ§Ã£o da Categoria AutomÃ¡tica

1. O usuÃ¡rio revisa uma transaÃ§Ã£o categorizada automaticamente e discorda da categoria atribuÃ­da.
2. O usuÃ¡rio opta por editar a categoria da transaÃ§Ã£o manualmente, conforme RF008.2.
3. O sistema pode usar essa correÃ§Ã£o para refinar o modelo de IA para futuras categorizaÃ§Ãµes.

## ðŸš« Fluxos de ExceÃ§Ã£o

### âš ï¸ FE01 - Falha na ComunicaÃ§Ã£o com MÃ³dulo de IA

1. No passo 2 do fluxo principal, se houver uma falha na comunicaÃ§Ã£o com o mÃ³dulo de inteligÃªncia artificial, o sistema
   nÃ£o consegue categorizar automaticamente a transaÃ§Ã£o.
2. O sistema marca a transaÃ§Ã£o como "pendente de categorizaÃ§Ã£o" e pode notificar o usuÃ¡rio para categorizÃ¡-la
   manualmente.

### âš ï¸ FE02 - Nenhuma Categoria Sugerida

1. No passo 4 do fluxo principal, se o mÃ³dulo de IA nÃ£o conseguir sugerir uma categoria com confianÃ§a mÃ­nima, a
   transaÃ§Ã£o permanece sem categoria e Ã© marcada para revisÃ£o manual pelo usuÃ¡rio.

## ðŸ§ª Exemplos de Uso

### RequisiÃ§Ã£o Interna (Sistema para AI) - Solicitar CategorizaÃ§Ã£o

```json
{
  "transaction_id": "uuid-da-transacao-exemplo",
  "description": "AlmoÃ§o no restaurante",
  "amount": 45.00
}
```

### Resposta da AI (para Sistema) - Categoria Sugerida

```json
{
  "transaction_id": "uuid-da-transacao-exemplo",
  "suggested_category_id": "uuid-da-categoria-alimentacao",
  "confidence_score": 0.92
}
```

---

> ---------------------------------------------------------------------------
> #### ðŸ’° METAKYASSHU ðŸ’°
> ***Transformando finanÃ§as em conquistas compartilhadas***
> --------------------------------------------------------------------------- 