# RF017 ðŸ‘® DefiniÃ§Ã£o granular de permissÃµes por membro em grupo

## ðŸ“ DescriÃ§Ã£o

Esta funcionalidade permite a definiÃ§Ã£o granular de permissÃµes (visualizar, editar, aprovar) por membro dentro de um
grupo financeiro. O objetivo Ã© fornecer aos administradores de grupos o controle total sobre as aÃ§Ãµes que cada membro
pode realizar, garantindo a seguranÃ§a e a integridade dos dados financeiros compartilhados.

## ðŸ‘¥ Atores

- ðŸ‘¤ **Administrador do Grupo**: UsuÃ¡rio com permissÃ£o para gerenciar as permissÃµes de outros membros.
- ðŸ‘¥ **Membro do Grupo**: UsuÃ¡rio que possui permissÃµes definidas dentro de um grupo.

## âš ï¸ PrÃ©-condiÃ§Ãµes

- O usuÃ¡rio deve estar autenticado no sistema.
- O usuÃ¡rio deve ser um administrador de um grupo financeiro existente.
- O membro do grupo ao qual as permissÃµes serÃ£o aplicadas deve existir e pertencer ao mesmo grupo.

## ðŸ”Œ Endpoints

- `PUT /api/groups/{groupId}/members/{memberId}/permissions`

## ðŸ“‹ Dados de PermissÃ£o do Membro

| Campo         | Tipo     | ObrigatÃ³rio | DescriÃ§Ã£o                                         | RestriÃ§Ãµes                                                                 |
|---------------|----------|-------------|---------------------------------------------------|----------------------------------------------------------------------------|
| `groupId`     | `string` | âœ… Sim       | ID Ãºnico do grupo financeiro.                     | Deve ser um ID de grupo vÃ¡lido e existente.                                |
| `memberId`    | `string` | âœ… Sim       | ID Ãºnico do membro dentro do grupo.               | Deve ser um ID de usuÃ¡rio vÃ¡lido e existente dentro do grupo especificado. |
| `permissions` | `array`  | âœ… Sim       | Lista de permissÃµes a serem concedidas ao membro. | Valores permitidos: `VIEW`, `EDIT`, `APPROVE`.                             |

## ðŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    actor A as Administrador do Grupo
    participant S as Sistema
    A ->> S: 1. Solicita a atualizaÃ§Ã£o das permissÃµes de um membro (PUT /api/groups/{groupId}/members/{memberId}/permissions)
    S ->> S: 2. Valida o administrador do grupo e o membro
    S ->> S: 3. Atualiza as permissÃµes do membro no banco de dados
    S ->> A: 4. Retorna confirmaÃ§Ã£o de sucesso (HTTP 200 OK)
```

1. O Administrador do Grupo envia uma requisiÃ§Ã£o PUT para `/api/groups/{groupId}/members/{memberId}/permissions` com as
   novas permissÃµes no corpo da requisiÃ§Ã£o.
2. O sistema valida se o usuÃ¡rio que fez a requisiÃ§Ã£o Ã© um administrador do `groupId` especificado e se o `memberId`
   pertence a este grupo.
3. O sistema atualiza as permissÃµes do `memberId` no banco de dados com base nas permissÃµes fornecidas.
4. O sistema retorna uma resposta HTTP 200 OK com uma mensagem de sucesso.

## ðŸ”€ Fluxos Alternativos

### âš ï¸ FA01 - PermissÃµes Parciais

1. O Administrador do Grupo envia uma requisiÃ§Ã£o com apenas algumas permissÃµes a serem atualizadas.
2. O sistema atualiza apenas as permissÃµes fornecidas, mantendo as demais inalteradas (se a lÃ³gica de negÃ³cio permitir).

## ðŸš« Fluxos de ExceÃ§Ã£o

### âš ï¸ FE01 - Administrador NÃ£o Autorizado

1. O usuÃ¡rio que tenta modificar as permissÃµes nÃ£o Ã© um administrador do grupo.
2. O sistema retorna uma resposta HTTP 403 Forbidden.

### âš ï¸ FE02 - Membro NÃ£o Encontrado ou NÃ£o Pertencente ao Grupo

1. O `memberId` especificado nÃ£o Ã© encontrado ou nÃ£o pertence ao `groupId`.
2. O sistema retorna uma resposta HTTP 404 Not Found.

### âš ï¸ FE03 - PermissÃµes InvÃ¡lidas

1. O array de `permissions` contÃ©m valores invÃ¡lidos.
2. O sistema retorna uma resposta HTTP 400 Bad Request.

## ðŸ§ª Exemplos de Uso

### RequisiÃ§Ã£o HTTP para Conceder PermissÃµes de VisualizaÃ§Ã£o e EdiÃ§Ã£o

```http
PUT /api/groups/grp_123abc/members/mem_456def/permissions HTTP/1.1
Host: api.metakyasshu.com
Content-Type: application/json

{
  "permissions": ["VIEW", "EDIT"]
}
```

### RequisiÃ§Ã£o HTTP para Conceder PermissÃµes de AprovaÃ§Ã£o

```http
PUT /api/groups/grp_123abc/members/mem_789ghi/permissions HTTP/1.1
Host: api.metakyasshu.com
Content-Type: application/json

{
  "permissions": ["APPROVE"]
}
```

---

> ---------------------------------------------------------------------------
> #### ðŸ’° METAKYASSHU ðŸ’°
> ***Transformando finanÃ§as em conquistas compartilhadas***
> --------------------------------------------------------------------------- 