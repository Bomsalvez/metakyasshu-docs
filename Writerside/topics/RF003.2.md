# RF003.2 ðŸ‘¥ GestÃ£o de perfis de usuÃ¡rio

## ðŸ“ DescriÃ§Ã£o

Esta funcionalidade permite que o usuÃ¡rio gerencie (visualize, edite e exclua) seus mÃºltiplos perfis financeiros criados
no sistema.

## ðŸ‘¥ Atores

- ðŸ‘¤ UsuÃ¡rio Autenticado

## âš ï¸ PrÃ©-condiÃ§Ãµes

- O usuÃ¡rio deve estar logado no sistema.
- O usuÃ¡rio deve ter pelo menos um perfil criado.

## ðŸ”Œ Endpoints

- `GET /api/profile`
- `GET /api/profile/{profileId}`
- `PUT /api/profile/{profileId}`
- `DELETE /api/profile/{profileId}`

## ðŸ“‹ Dados do Perfil

| Campo         | Tipo     | ObrigatÃ³rio | DescriÃ§Ã£o                      | RestriÃ§Ãµes               |
|---------------|----------|-------------|--------------------------------|--------------------------|
| `profileId`   | `string` | âœ… Sim       | ID Ãºnico do perfil             | UUID vÃ¡lido              |
| `name`        | `string` | âœ… Sim       | Nome atualizado do perfil      | MÃ­nimo de 3 caracteres   |
| `description` | `string` | â¬œ NÃ£o       | DescriÃ§Ã£o atualizada do perfil | MÃ¡ximo de 255 caracteres |

## ðŸ”„ Fluxo Principal

```mermaid
sequenceDiagram
    actor U as UsuÃ¡rio
    participant S as Sistema
    participant BD as Banco de Dados
    U->>S: Acessa a seÃ§Ã£o de gerenciamento de perfis
    S->>BD: Solicita lista de perfis do usuÃ¡rio
    BD->>S: Retorna lista de perfis
    S->>U: Exibe a lista de perfis
    U->>S: Seleciona um perfil para visualizar/editar/excluir
    alt Visualizar Perfil
        S->>BD: Solicita detalhes do perfil
        BD->>S: Retorna detalhes do perfil
        S->>U: Exibe detalhes do perfil selecionado
    else Editar Perfil
        S->>U: Exibe formulÃ¡rio de ediÃ§Ã£o com dados atuais
        U->>S: Altera os dados e envia o formulÃ¡rio
        S->>S: Valida os dados atualizados
        S->>BD: Atualiza o perfil no banco de dados
        BD->>S: Confirma a atualizaÃ§Ã£o
        S->>U: Exibe mensagem de sucesso e perfil atualizado
    else Excluir Perfil
        S->>U: Solicita confirmaÃ§Ã£o de exclusÃ£o
        U->>S: Confirma a exclusÃ£o
        S->>BD: Remove o perfil do banco de dados
        BD->>S: Confirma a remoÃ§Ã£o
        S->>U: Exibe mensagem de sucesso e remove perfil da lista
    end
```

1. O usuÃ¡rio autenticado acessa a seÃ§Ã£o de gerenciamento de perfis.
2. O sistema exibe uma lista de todos os perfis associados ao usuÃ¡rio.
3. O usuÃ¡rio seleciona uma opÃ§Ã£o: visualizar detalhes, editar ou excluir um perfil existente.
4. **Para VisualizaÃ§Ã£o:** O sistema exibe os detalhes completos do perfil selecionado.
5. **Para EdiÃ§Ã£o:**
   a. O sistema apresenta um formulÃ¡rio prÃ©-preenchido com os dados atuais do perfil.
   b. O usuÃ¡rio modifica os campos desejados (ex: nome, descriÃ§Ã£o) e submete as alteraÃ§Ãµes.
   c. O sistema valida os novos dados e atualiza o perfil no banco de dados.
   d. O sistema exibe uma mensagem de sucesso e a lista de perfis atualizada.
6. **Para ExclusÃ£o:**
   a. O sistema solicita uma confirmaÃ§Ã£o do usuÃ¡rio para a exclusÃ£o do perfil.
   b. ApÃ³s a confirmaÃ§Ã£o, o sistema remove o perfil do banco de dados.
   c. O sistema exibe uma mensagem de sucesso e a lista de perfis atualizada (sem o perfil excluÃ­do).

## ðŸ”€ Fluxos Alternativos

### âš ï¸ FA01 - Tentativa de exclusÃ£o do Ãºltimo perfil

1. No passo 6b do fluxo principal, se o usuÃ¡rio tentar excluir o Ãºltimo perfil restante, o sistema exibe uma mensagem de
   erro informando que nÃ£o Ã© possÃ­vel excluir o Ãºnico perfil existente.

## ðŸš« Fluxos de ExceÃ§Ã£o

### âš ï¸ FE01 - Perfil nÃ£o encontrado

1. Em qualquer operaÃ§Ã£o (visualizar, editar, excluir), se o `profileId` fornecido nÃ£o corresponder a um perfil existente
   para o usuÃ¡rio, o sistema exibe uma mensagem de erro indicando que o perfil nÃ£o foi encontrado.

### âš ï¸ FE02 - Dados de ediÃ§Ã£o invÃ¡lidos

1. No passo 5c do fluxo principal, se os dados de ediÃ§Ã£o forem invÃ¡lidos (ex: nome do perfil jÃ¡ existente para o
   usuÃ¡rio, nome muito curto), o sistema exibe uma mensagem de erro especÃ­fica para o campo invÃ¡lido.
2. O sistema mantÃ©m o usuÃ¡rio no formulÃ¡rio de ediÃ§Ã£o para que ele possa corrigir os dados.

## ðŸ§ª Exemplos de Uso

### RequisiÃ§Ã£o HTTP - Listar Perfis

```http
GET /api/profile HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

### RequisiÃ§Ã£o HTTP - Obter Detalhes de um Perfil

```http
GET /api/profile/a1b2c3d4e5f6-1234-5678-90ab-cdef12345678 HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

### RequisiÃ§Ã£o HTTP - Atualizar um Perfil

```http
PUT /api/profile/a1b2c3d4e5f6-1234-5678-90ab-cdef12345678 HTTP/1.1
Host: api.metakyasshu.com
Content-Type: application/json
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]

{
  "name": "Perfil Profissional Atualizado",
  "description": "Meus gastos e receitas relacionados ao trabalho."
}
```

### RequisiÃ§Ã£o HTTP - Excluir um Perfil

```http
DELETE /api/profile/a1b2c3d4e5f6-1234-5678-90ab-cdef12345678 HTTP/1.1
Host: api.metakyasshu.com
Authorization: Bearer [TOKEN_DE_AUTENTICACAO]
```

---

> ---------------------------------------------------------------------------
> #### ðŸ’° METAKYASSHU ðŸ’°
> ***Transformando finanÃ§as em conquistas compartilhadas***
> --------------------------------------------------------------------------- 